<?xml version="1.0"?>
<rdf:RDF 
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
    xmlns:owl="http://www.w3.org/2002/07/owl#"
    xmlns:redfoot="http://redfoot.net/2005/redfoot#"
    xmlns:template="http://redfoot.net/2005/template#"
    xmlns:server="http://redfoot.net/2005/server#"
>

  <redfoot:Namespace rdf:about="#">
    <rdfs:label>Redfoot Namespace</rdfs:label>
    <rdfs:comment>
     The core Redfoot namespace.
    </rdfs:comment>
  </redfoot:Namespace>

  <owl:Ontology rdf:ID="Ontology">
    <rdfs:label xml:lang="en">An ontology for Bookmarks.</rdfs:label>
  </owl:Ontology>

  <owl:Class rdf:ID="Bookmark">
    <rdfs:label>Bookmark</rdfs:label>
    <rdfs:comment></rdfs:comment>
    <rdfs:subClassOf rdf:resource="http://www.w3.org/2000/01/rdf-schema#Resource"/>
    <template:content>
     <server:PagePartHandler rdf:ID="BookmarkHandler">
      <rdf:value rdf:datatype="http://redfoot.net/2005/server#Kid">
<![CDATA[
  <span xmlns:kid="http://purl.org/kid/ns#" kid:omit="">
<?python
import time

BOOKMARK = redfoot.namespace("http://redfoot.net/2006/bookmark#")
DC_created = URIRef("http://purl.org/dc/terms/created")
DC_creator = URIRef("http://purl.org/dc/elements/1.1/creator")

refersTo = redfoot.value(request.uri, BOOKMARK.refersTo)

if refersTo:
      creators = list(redfoot.objects(request.uri, DC_creator))
      c = redfoot.value(request.uri, DC_created)
      try:
          created = time.strftime("%A %d %B, %Y", time.gmtime(float(c)))
      except:
          created = None

?>
   <span kid:if="refersTo" >
    <p>This bookmark refers to 
      <a href="${refersTo}">${redfoot.label(refersTo) or "--"}</a>.
      <span kid:if="created">The bookmark was created on ${created}.</span>
      <span kid:if="len(creators)==1">The bookmark was added by 
            <a href="${request.relative(creators[0].concrete())}">${redfoot.label(creators[0]) or creators[0]}</a>.
      </span> 
      <span kid:if="len(creators)>1">The bookmark was added by:
        <ul>
          <li kid:for="creator in creators">
            <a href="${request.relative(creator.concrete())}">${redfoot.label(creator) or creator}</a>
          </li>
        </ul>
      </span> 
    </p>

   </span>
   <span kid:if="not refersTo" >
     <p>This bookmark does not refer to anything :(</p>
   </span>
  </span>
]]>
      </rdf:value>
     </server:PagePartHandler> 
    </template:content>
  </owl:Class>

  <owl:ObjectProperty rdf:ID="refersTo">
    <rdfs:label>refers to</rdfs:label>
    <rdfs:comment></rdfs:comment>
    <rdfs:domain rdf:resource="#Bookmark"/>
    <rdfs:range rdf:resource="http://www.w3.org/2000/01/rdf-schema#Resource"/>
  </owl:ObjectProperty>

<!-- Tag -->


</rdf:RDF>  
