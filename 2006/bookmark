<?xml version="1.0"?>
<rdf:RDF 
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
    xmlns:owl="http://www.w3.org/2002/07/owl#"
    xmlns:redfoot="http://redfoot.net/2005/redfoot#"
    xmlns:program="http://redfoot.net/2005/program#"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:dct="http://purl.org/dc/terms/"
    xmlns:foaf="http://xmlns.com/foaf/0.1/"
    xmlns:template="http://redfoot.net/2005/template#"
    xmlns:server="http://redfoot.net/2005/server#"
>

  <redfoot:Namespace rdf:about="#">
    <rdfs:label>Redfoot Namespace</rdfs:label>
    <rdfs:comment>
     The core Redfoot namespace.
    </rdfs:comment>
  </redfoot:Namespace>

  <owl:Ontology rdf:ID="Ontology">
    <rdfs:label xml:lang="en">An ontology for Bookmarks.</rdfs:label>
  </owl:Ontology>

  <owl:Class rdf:ID="Bookmark">
    <rdfs:label>Bookmark</rdfs:label>
    <rdfs:comment></rdfs:comment>
    <rdfs:subClassOf rdf:resource="http://www.w3.org/2000/01/rdf-schema#Resource"/>
    <template:content>
     <server:PagePartHandler rdf:ID="BookmarkHandler">
      <rdf:value rdf:datatype="http://redfoot.net/2005/server#Kid">
<![CDATA[
  <span xmlns:kid="http://purl.org/kid/ns#" kid:omit="">
    <p><a href="${redfoot.value(request.uri)}">${redfoot.label(redfoot.value(request.uri)) or "--"}</a></p>
<?python

BOOKMARK = redfoot.namespace("http://redfoot.net/2006/bookmark#")
DC_created = URIRef("http://purl.org/dc/terms/created")
DC_creator = URIRef("http://purl.org/dc/elements/1.1/creator")

bookmark_uri = redfoot.value(request.uri)

bookmarks = set()
for bookmark in redfoot.subjects(RDF.type, BOOKMARK.Bookmark):
    uri = redfoot.value(bookmark)
    if uri == bookmark_uri:
        created = redfoot.value(bookmark, DC_created)
        creator = redfoot.value(bookmark, DC_creator)
        bookmarks.add((created, creator, uri))
bookmarks = list(bookmarks)
bookmarks.sort()
bookmarks.reverse()
?>
    <span kid:if="bookmarks">
      <p>Other bookmarks for this page</p>
      <ul>
        <li kid:for="created, creator, uri in bookmarks">
          <a href="${uri}">by ${creator} on ${created}</a>
        </li>
      </ul>
    </span>  

  </span>
]]>
      </rdf:value>
     </server:PagePartHandler> 
    </template:content>
  </owl:Class>

  <owl:ObjectProperty rdf:ID="refersTo">
    <rdfs:label>refers to</rdfs:label>
    <rdfs:comment></rdfs:comment>
    <rdfs:domain rdf:resource="#Bookmark"/>
    <rdfs:range rdf:resource="http://www.w3.org/2000/01/rdf-schema#Resource"/>
  </owl:ObjectProperty>

<!-- Tag -->


</rdf:RDF>  
